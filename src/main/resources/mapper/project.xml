<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.mapper.ProjectMapper">

<!-- total -->
	<select id="totalCount" resultType="int"
		parameterType="java.util.HashMap">
		select count(*) from project
		<where>
			<if test="searchtxt !=null and searchtxt !='' ">
				<if test="search.equals('project_title')">
					project_title like CONCAT('%',#{searchtxt},'%')
				</if> 
				<if test="search.equals('no')">
					no like CONCAT('%',#{searchtxt},'%')
				</if>
			</if>
		</where>	
		order by project_no
	</select>

	<select id="projectList" resultType="com.bitcamp.dto.ProjectDTO"
		parameterType="java.util.HashMap">	
	 select no,project_no,project_title,category_no            
     from project   
    	<where>
			<if test="searchtxt !=null and searchtxt !='' ">
				<if test="search.equals('project_title')">
					project_title like CONCAT('%',#{searchtxt},'%')
				</if>
				<if test="search.equals('no')">
					no like CONCAT('%',#{searchtxt},'%')
				</if>
			</if>
		</where>	
     order by project_no
     limit #{startRow}, 10
	</select>
	
	<insert id="projectInsert" parameterType="com.bitcamp.dto.ProjectDTO">
		insert into project (project_title, project_photo, targetprice, introduce, startdate, enddate, payment_date, project_contents, no, category_no) 
		values(#{project_title}, #{project_photo}, 10000, '소개글', '2019-08-20', '2019-09-20', '2019-10-01', '테스트.pdf', 2, #{category_no})
	</insert>

	

</mapper>
    